"use strict";(()=>{var e={};e.id=728,e.ids=[728],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},494:(e,t,r)=>{r.r(t),r.d(t,{config:()=>d,default:()=>o,routeModule:()=>l});var a={};r.r(a),r.d(a,{default:()=>handler});var s=r(1802),i=r(7153),u=r(6249),n=r(6962);async function handler(e,t){let{listId:r}=e.query;if("DELETE"===e.method){let a=e.headers.authorization;if(!a||!a.startsWith("Bearer "))return t.status(401).json({error:"not_authenticated"});let s=a.split(" ")[1],{data:i}=await n.R.auth.getUser(s),u=i?.user;if(!u)return t.status(401).json({error:"invalid_token"});let{error:o}=await n.R.from("favorites").delete().eq("user_id",u.id).eq("list_id",r);return o?t.status(500).json({error:"db_error"}):t.json({ok:!0})}return t.status(405).end()}let o=(0,u.l)(a,"default"),d=(0,u.l)(a,"config"),l=new s.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/favorites/[listId]",pathname:"/api/favorites/[listId]",bundlePath:"",filename:""},userland:a})},6962:(e,t,r)=>{r.d(t,{R:()=>i});let a=require("@supabase/supabase-js"),s=process.env.SUPABASE_SERVICE_ROLE_KEY,i=(0,a.createClient)("https://pgsvorcullkrgmcbpszb.supabase.co",s,{auth:{persistSession:!1}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[222],()=>__webpack_exec__(494));module.exports=r})();