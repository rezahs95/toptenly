"use strict";(()=>{var e={};e.id=629,e.ids=[629],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},8150:(e,t,i)=>{i.r(t),i.d(t,{config:()=>o,default:()=>n,routeModule:()=>u});var a={};i.r(a),i.d(a,{default:()=>handler});var s=i(1802),r=i(7153),d=i(6249),l=i(6962);async function handler(e,t){let{id:i}=e.query,{data:a}=await l.R.from("list_items").select("*").eq("id",i).limit(1);if(!a||0===a.length)return t.status(404).json({error:"not found"});let s=a[0],{data:r}=await l.R.from("lists").select("title").eq("id",s.list_id).limit(1),{data:d}=await l.R.rpc("aggregate_scores",{p_list_id:s.list_id}),n=(d||[]).find(e=>e.item_id===s.id)?.total||0;t.json({id:s.id,title:s.title,description:s.description,score:n,list_title:r?.[0]?.title||""})}let n=(0,d.l)(a,"default"),o=(0,d.l)(a,"config"),u=new s.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/item/[id]",pathname:"/api/item/[id]",bundlePath:"",filename:""},userland:a})},6962:(e,t,i)=>{i.d(t,{R:()=>r});let a=require("@supabase/supabase-js"),s=process.env.SUPABASE_SERVICE_ROLE_KEY,r=(0,a.createClient)("https://pgsvorcullkrgmcbpszb.supabase.co",s,{auth:{persistSession:!1}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),i=t.X(0,[222],()=>__webpack_exec__(8150));module.exports=i})();