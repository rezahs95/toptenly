"use strict";(()=>{var e={};e.id=66,e.ids=[66],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1266:(e,t,s)=>{s.r(t),s.d(t,{config:()=>d,default:()=>o,routeModule:()=>l});var r={};s.r(r),s.d(r,{default:()=>handler});var a=s(1802),i=s(7153),u=s(6249),n=s(6962);async function handler(e,t){let s=e.headers.authorization;if(!s||!s.startsWith("Bearer "))return t.status(401).json({error:"not_authenticated"});let r=s.split(" ")[1],{data:a}=await n.R.auth.getUser(r);if(!a?.user)return t.status(401).json({error:"invalid_token"});let i=a.user.id,u=e.query.listId;if(!u)return t.status(400).json({error:"missing_listId"});let{data:o}=await n.R.from("votes").select("weight").eq("user_id",i).eq("list_id",u),d=(o||[]).map(e=>e.weight);t.json({used:d})}let o=(0,u.l)(r,"default"),d=(0,u.l)(r,"config"),l=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/user/votes",pathname:"/api/user/votes",bundlePath:"",filename:""},userland:r})},6962:(e,t,s)=>{s.d(t,{R:()=>i});let r=require("@supabase/supabase-js"),a=process.env.SUPABASE_SERVICE_ROLE_KEY,i=(0,r.createClient)("https://pgsvorcullkrgmcbpszb.supabase.co",a,{auth:{persistSession:!1}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[222],()=>__webpack_exec__(1266));module.exports=s})();